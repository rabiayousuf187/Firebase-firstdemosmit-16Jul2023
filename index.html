<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="./css/style.css"/ rel="stylesheet">
<style></style>
</head>
<body>

<h2>Modal Login Form</h2>

<button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">Login</button>

<div id="id01" class="modal">

    <div class="imgcontainer">
      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
      <img src="https://cdn2.iconfinder.com/data/icons/essenstial-ultimate-ui/64/avatar-512.png" alt="Avatar" class="avatar">
    </div>

    <div class="container">
      <label for="email"><b>Email</b></label>
      <input type="text" id="email" placeholder="Enter Email" name="email" required>

      <label for="psw"><b>Password</b></label>
      <input type="password" id="password" placeholder="Enter Password" name="psw" required>
        
      <label>
          <input type="checkbox" checked="checked" name="remember"> Remember me
        </label>
    </div>
    
    <button type="submit" id="signUp" name="signup_submit" value="Signup">Login</button>
    <div class="container" style="background-color:#f1f1f1">
        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
        <span class="psw">Forgot <a href="#">password?</a></span>
    </div>

</div>

<!-- <script src="./js/script.js" type="module"> -->

<!-- <script type="module" src="./js/firebase-config.js"></script> -->
</body>
<script type="module">

    // import { app, auth, analytics, Database} from "./firebase-config";
// <!-- FIrebase Configuration -->
    // Import the functions you need from the SDKs you need
    


import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js";
import { getDatabase, set} from "https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js";
import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";


// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDt4D4mjYUoVfOp-h9-u3RyhSGn8cev45c",
  authDomain: "firstdemosmit-2023.firebaseapp.com",
  databaseURL: "https://firstdemosmit-2023-default-rtdb.firebaseio.com",
  projectId: "firstdemosmit-2023",
  storageBucket: "firstdemosmit-2023.appspot.com",
  messagingSenderId: "762847069372",
  appId: "1:762847069372:web:dc411b6a909afc8bf5fcb9",
  measurementId: "G-Y2SFVWW83W"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const Database = getDatabase(app);
const auth = getAuth();

// Get the modal
var modal = document.getElementById('id01');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
if (event.target == modal) {
    modal.style.display = "none";
}
}

signUp.addEventListener('click',(e) =>{

let email = document.getElementById('email').value;
let password = document.getElementById('password').value;

createUserWithEmailAndPassword(auth, email, password)
.then((userCredential) => {
// Signed in 
const user = userCredential.user;
set(ref(Database , 'user/' + email ),{
    email: email,
    password: password,
});
console.log('User Created');
// ...
})
.catch((error) => {
const errorCode = error.code;
const errorMessage = error.message;

console.log(errorMessage);
// ..
});
});
</script>
</html>
